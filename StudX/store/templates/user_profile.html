{% extends 'base.html' %}
{% block content %}

    <style>
        .filter-form {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1rem;
            background-color: #f9fafb;
            border-radius: 1rem;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }

        .filter-form label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #4b5563;
            margin-bottom: 0.25rem;
        }

        .filter-form input[type="date"] {
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background-color: #ffffff;
            transition: border-color 0.3s;
            font-size: 0.9rem;
            color: #374151;
        }

        .filter-form input[type="date"]:focus {
            border-color: #2563eb;
            outline: none;
        }

        .filter-form button {
            padding: 0.5rem 1rem;
            background-color: #2563eb;
            color: #ffffff;
            font-weight: 600;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
        }

        .filter-form button:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
        }

    </style>

    <section class="form-container">

        <div class="form-design">
            <!-- User Details Section -->
            <h2 class="heading">YOUR PROFILE</h2>
            <div class="user-detail">

                <ul class="user-info-list">

                    <li><strong>User Name:</strong> {{ username }}</li>
                    <li><strong>First Name:</strong> {{ first_name }}</li>
                    <li><strong>Last Name:</strong> {{ last_name }}
                    <li><strong>Email:</strong> {{ email }}
                    <li><strong>Phone number:</strong> {{ phone_number }}</li>


                </ul>
                <div class="button-container">
                    <a href="{% url 'password_change' %}" class="blue-button">Change Password</a>
                </div>
            </div>
            <h3>Your Transaction History</h3>

            <form method="get" class="filter-form">
                <label for="from_date">From:</label>
                <input type="date" name="from_date" id="from_date" value="{{ from_date }}">
                <label for="to_date">To:</label>
                <input type="date" name="to_date" id="to_date" value="{{ to_date }}">
                <button type="submit">Filter</button>
            </form>

            {% if orders %}
                <p><strong>Total Spent:</strong> Rs. {{ total_spent_npr|floatformat:2 }}</p>
                <div class="table-container">
                    <table class="responsive-table">
                        <thead>
                        <tr>
                            <th>Date</th>
                            <th>Product</th>
                            <th>Amount (NPR)</th>
                            <th>Status</th>
                            <th>Receipt</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for order in orders %}
                            <tr>
                                <td>{{ order.created_at|date:"Y-m-d H:i" }}</td>
                                <td>{{ order.product.name }}</td>
                                <td>Rs. {{ amount_npr }}</td>
                                <td>{{ order.status }}</td>
                                <td>
                                    <a href="{% url 'order_receipt' order.id %}" class="btn-receipt">View Receipt</a>
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p>No transactions found.</p>
            {% endif %}

        </div>
    </section>

{% endblock %}


